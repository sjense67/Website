---
title: "SQL"
output: html_document
---

##Filtering Columns and Rows

In SQL one can filter columns and rows of a selected table. Columns can be filtered using the SELECT command and rows can be filtered using the WHERE command. Following is an example of this using the Lahman baseball database.

Before the tables can be filtered, the Lahman and sqldf packages need to be loaded.

```{r message=FALSE, warning=FALSE}
library(Lahman)
library(sqldf)
```

Here is an example of filters used in the Batting table of the Lahman database to look at the home run totals of the 1927 Yankees.

```{r}
query<-"SELECT playerID,teamID,yearID,HR FROM Batting
WHERE teamID='NYA' and yearID=1927"
sqldf(query)
```

One can also get more selective with the data, using the same filters. Following are some more specific questions within the Batting table of the Lahman database, the queries used to find the answers, and the answers themselves.

####Examples

Question 1: Find all instances where Yankees have hit 40 or more home runs.

For this question, one will not only want to see the number of homeruns and the team, but most likely the player and the year as well. Additionally, instead of using an equals sign in the WHERE clause, one can use greater or less than signs as well to narrow or broaden searches. 

Here is the query line used to find the answer to Question 1.

```{r}
query<-"SELECT playerID,teamID,yearID,HR from Batting
WHERE teamID='NYA' and HR>=40"
sqldf(query)
```

Question 2: Find an instance where a player had more than 40 homeruns but less than 60 strikeouts.

```{r}
query<-"SELECT playerID,teamID,yearID,HR,SO from Batting
WHERE HR>40 and SO<60"
sqldf(query)
```

Question 3: Find all instances of Phillies in the 1970s hitting more than 30 homeruns.

```{r}
query<-"SELECT playerID, teamID, yearID, HR FROM Batting
WHERE teamID='PHI'and yearID>1970 and yearID<=1979 and HR>30"
sqldf(query)
```

Question 4: Find every instance of a player hitting more than 50 homeruns, ordered from highest to lowest homerun total.

To order the information, a ORDER BY clause is used. This will default to ascending order (smallest to largest). To organize in descending order, the DESC command will be placed after the ORDER BY command.

```{r}
query<-"SELECT playerID,yearID,teamID,HR FROM Batting
WHERE HR>50
ORDER BY HR DESC"
sqldf(query)
```

